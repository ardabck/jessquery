<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your HTML Page</title>
  </head>
  <body>
    <div class="display"></div>
    <button id="button">Click Me</button>
    <div class="buttons"></div>

    <script type="module">
      import { $, $$, promisify, setErrorHandler } from "../index.js"

      const display = $(".display")
      const button = $("#button")
      const buttons = $$(".buttons")

      async function fetchData() {
        await new Promise((resolve) => setTimeout(resolve, 200))
        const response = await fetch(
          "https://jsonplaceholder.typicode.com/users/1"
        )
        const data = await response.json()
        return data.name
      }

      const slowLoadingText = promisify((resolve) => {
        setTimeout(() => {
          if (display.textContent === "") {
            resolve("Loading...")
          }
        }, 200)
      })

      button.on("click", () => {
        display
          .text(slowLoadingText())
          .text(fetchData())
          .css("color", "hotpink")
      })
    </script>
  </body>
</html>
