<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your HTML Page</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <!-- Placeholder elements for your jQuery selection -->
    <div class="display"></div>
    <button id="button">Click Me</button>
    <div class="buttons"></div>

    <script type="module">
      import { $, $$, promisify, setErrorHandler } from "../index.js"

      const display = $(".display")
      const button = $("#button")
      const buttons = $$(".buttons")

      async function fetchData() {
        await new Promise((resolve) => setTimeout(resolve, 2000))
        const response = await fetch(
          "https://jsonplaceholder.typicode.com/users/1"
        )
        const data = await response.json()
        return data.name
      }

      const slowLoadingText = promisify(
        (resolve) => {
          setTimeout(() => {
            if (display.textContent === "") {
              resolve("Loading...")
            }
          }, 200)
        },
        100,
        { you: "SUCK" }
      )

      button.on("click", () => {
        display
          .text(slowLoadingText())
          .text(fetchData())
          .css("color", "hotpink")
      })

      const fadeIn = [{ opacity: 0 }, { opacity: 1 }]
      const fadeOut = [{ opacity: 1 }, { opacity: 0 }]
      const oneSecond = { duration: 1000 }

      buttons
        .addClass("btn")
        .text(
          "this text will animate in 5 seconds. It will fade in and out twice then disappear."
        )
        .wait(5000)
        .transition(fadeIn, oneSecond)
        .transition(fadeOut, oneSecond)
        .transition(fadeIn, oneSecond)
        .transition(fadeOut, oneSecond)
        .purge()
    </script>
  </body>
</html>
